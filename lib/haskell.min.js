(function(){var f,redefine,_push,__slice=[].slice;f=module.exports=function(lambda){var args,variable,_ref,_ref1;return null==lambda&&(lambda=""),lambda=lambda.trim(),args=["x"],lambda=lambda.split(/\s*\-\>\s*/).filter(function(r){return""!==r}),lambda.single()||lambda.empty()||(args=lambda[0].split(" ").filter(function(r){return""!==r})),lambda.single()&&(args=(null!=(_ref=lambda[0].match(/([a-z\_\$][\w\_\$]*)/gi))?_ref.unique():void 0)||args),lambda=(null!=(_ref1=lambda.pop())?_ref1.trim():void 0)||"",variable=null==lambda.match(/([a-z\_\$][\w\_\$]*)/i)?args[0]:"",eval("(function("+args+") { return ("+variable+lambda+"); })")},String.lambda=String.toFunction=f.lambda=f,Function.prototype.lambda=Function.prototype.toFunction=function(){return this},String.prototype.lambda=String.prototype.toFunction=function(){return f(this)},Function.prototype.c=Function.prototype.curry=function(){var r;return r=arguments.length>=1?__slice.call(arguments,0):[],f.curry.apply(f,[this.toFunction()].concat(__slice.call(r)))},f.curry=f.c=function(){var r,t;return t=arguments[0],r=arguments.length>=2?__slice.call(arguments,1):[],function(){var e;return e=arguments.length>=1?__slice.call(arguments,0):[],t.toFunction().apply(null,__slice.call(r).concat(__slice.call(e)))}},redefine=function(){var r,t,e,n,a,u,o;for(e=arguments[0],t=arguments.length>=2?__slice.call(arguments,1):[],u=Array.prototype[e],t.push(e),o=[],n=0,a=t.length;a>n;n++)r=t[n],Array.prototype[r]=function(){var r,t;return t=arguments[0],r=arguments.length>=2?__slice.call(arguments,1):[],u.call.apply(u,[this,t.toFunction()].concat(__slice.call(r)))},o.push(global[r]=f[r]=Array[r]=function(){var t,e,n;return e=arguments[0],n=arguments[1],t=arguments.length>=3?__slice.call(arguments,2):[],e[r].apply(e,[n.toFunction()].concat(__slice.call(t)))});return o},redefine("forEach","foreach"),redefine("map"),redefine("reduce","fold","foldl"),redefine("reduceRight","foldr"),redefine("filter"),redefine("every"),redefine("some"),f.concat=Array.concat=function(r,t){return r.concat(t)},_push=Array.prototype.push,Array.prototype.push=function(){var r;return r=arguments.length>=1?__slice.call(arguments,0):[],_push.call.apply(_push,[this].concat(__slice.call(r))),this},global.push=f.push=Array.push=function(){var r,t;return t=arguments[0],r=arguments.length>=2?__slice.call(arguments,1):[],t.push.apply(t,r)},Array.prototype.zip||(global.zip=f.zip=Array.zip=function(){var r,t,e,n,a,u;for(n=function(){var t,e,n;for(n=[],t=0,e=arguments.length;e>t;t++)r=arguments[t],n.push(r.length);return n}.apply(this,arguments),e=f.fold(n,function(r,t){return Math.min(r,t)}),u=[],t=a=0;e>=0?e>a:a>e;t=e>=0?++a:--a)u.push(function(){var e,n,a;for(a=[],e=0,n=arguments.length;n>e;e++)r=arguments[e],a.push(r[t]);return a}.apply(this,arguments));return u},Array.prototype.zip=function(){return Array.zip.apply(Array,[this].concat(__slice.call(arguments)))}),Array.prototype.unique||(global.unique=f.unique=Array.unique=function(r){var t,e,n,a,u,o;for(n={},e=a=0,u=r.length;u>=0?u>a:a>u;e=u>=0?++a:--a)n[r[e]]=r[e];o=[];for(e in n)t=n[e],o.push(t);return o},Array.prototype.unique=function(){return Array.unique(this)}),Array.prototype.dictionary||(global.dictionary=f.dictionary=Array.dictionary=function(r,t){return r.reduce(function(r,e){return null!=e[t]&&(r[e[t]]=e),r},{})},Array.prototype.dictionary=function(r){return Array.dictionary(this,r)}),Array.prototype.empty||(global.empty=f.empty=Array.empty=function(r){return 1>r.length},Array.prototype.empty=function(){return Array.empty(this)}),Array.prototype.single||(Array.prototype.single=function(){return 1===this.length},global.single=f.single=Array.single=function(r){return r.single()}),Array.prototype.top||(global.top=f.top=Array.top=function(r){return r[r.length-1]},Array.prototype.top=function(){return Array.top(this)}),Array.prototype.remove||(global.remove=f.remove=Array.remove=function(r,t){var e,n;if("function"==typeof t)for(e=t.toFunction(),n=0;r.length>n;)e(r[n],n,r)&&(r.splice(n,1),n--),n++;else r.splice(t,1);return r},Array.prototype.remove=function(r){return Array.remove(this,r)}),f.Sequence=function(){function r(r){this.set(r)}return r.prototype.formula=null,r.prototype.sequence=[],r.prototype.set=function(r,t){return null==t&&(t=0),"function"==typeof r||"string"==typeof r?this.formula=r.toFunction():this.sequence=0===t?r:this.sequence.map(function(e,n){return n>=t&&t+r.length>n?r[n-r.length]:e})},r.prototype.get=function(r,t){var e;return null==t&&(t=0),this.formula?0===t?this.formula.call(this.sequence||this,r):function(){var n,a;for(a=[],e=n=0;t>=0?t>=n:n>=t;e=t>=0?++n:--n)a.push(this.formula.call(this.sequence||this,r+e));return a}.call(this):0===t?this.sequence[r]:this.sequence.slice(r,t+1)},r.prototype.inverse=function(){var t;return t=this.formula,new r(t?function(r){return 1/t(r)}:this.sequence.map("1/x"))},r.prototype.negative=function(){var t;return t=this.formula,new r(t?function(r){return-t(r)}:this.sequence.map("-x"))},r}(),global.Sequence=f.Sequence,f.seq=f.sequence=function(r){return new Sequence(r)},Array.prototype.sequence=function(){return new Sequence(this)}}).call(this);